# 馬狼（うまろう）プロジェクト

## 📋 プロジェクト概要

**プロジェクト名**: ウマジン（仮）- 馬券×人狼パーティーゲーム
**開発コードネーム**: umarou
**開発開始日**: 2026-02-27
**開発者**: しみず（shimizu307）
**開発環境**: OpenClaw + Claude Code → GitHub Pages

---

## 🎯 企画の経緯

### インスピレーション
- さらば青春の光のYouTube企画「高額当たり馬券を持っているのは誰だ？究極の心理ゲーム【馬狼】」
- URL: https://www.youtube.com/watch?v=Z5SNKemPNaE
- 人狼ゲームと競馬を組み合わせた独自の心理ゲーム

### コンセプト
- 「馬狼」をやりたい人のための**サポートアプリ**
- GM（ゲームマスター）不要で誰でも手軽に遊べる
- 1台のスマホを回して遊ぶ対面パーティーゲーム
- 友達同士で集まったときにすぐ始められる

---

## 🎮 ゲームルール

### 基本ルール（YouTube動画準拠）
1. **馬券配布**: 各プレイヤーに異なる馬番号をランダム配布（1人1頭、被りなし）
2. **レース結果入力**: 実際のレース結果を入力（勝ち馬番号を選択）
3. **馬狼決定**: 当たり馬券の持ち主が「馬狼（うまろう）」になる。馬狼は正体を隠す
4. **昼フェイズ（議論）**: タイマー付きの議論時間（口頭で議論）
5. **投票**: スマホ回し式の秘密投票で1人を追放
6. **判定**: 追放された人が馬狼なら村人側勝利、違うなら夜フェイズへ
7. **夜フェイズ**: 全員にスマホを回す（馬狼は追放対象を選択、村人はダミー画面）
8. **朝→議論→投票**: 繰り返し

### 勝利条件
- **村人側**: 馬狼を投票で追放 → 馬券を山分け
- **馬狼側**: 生き残り人数が馬狼と同数以下になるまで生存 → 馬券総取り

### 同票時のルール
- 決選投票を実施（同票の当人は投票に参加できない）
- 1人に決まるまで繰り返す
- 全員が候補者の場合はランダム処刑

### 人狼との主な違い
- 役職は「馬狼」と「村人」のみ（占い師・狩人等なし）
- 馬狼は1人のみ
- 馬券（実際の競馬レース）と連動できる
- シンプルなルールで初心者でもすぐ遊べる

---

## 🛠️ 技術仕様

### 現在の構成（v1 - Web版）
- **技術**: HTML/CSS/JavaScript（1ファイル完結）
- **サーバー**: 不要（完全クライアントサイド）
- **ホスティング**: GitHub Pages
- **URL**: https://subaru-blip.github.io/umarou/
- **リポジトリ**: https://github.com/subaru-blip/umarou

### 画面構成
1. トップ画面（プレイヤー人数選択・名前入力）
2. 馬券配布画面（スマホ回し式、チケット風デザイン）
3. レース結果入力画面（勝ち馬番号選択）
4. 馬狼発覚演出画面
5. 昼フェイズ画面（議論タイマー、生存者一覧）
6. 投票画面（スマホ回し式秘密投票）
7. 投票結果画面（決選投票対応）
8. 夜フェイズ画面（全員スマホ回し、馬狼/村人で分岐）
9. 朝の結果発表画面
10. ゲーム終了画面（勝者発表、紙吹雪演出）

### UXの工夫
- スマホ回し時に「○○さんに渡してください」画面を挟む（覗き見防止）
- 馬券確認はタップで表示（覗き見防止）
- 夜フェイズは全員にスマホを回す（馬狼がバレない）
- 村人はダミー画面（5秒待機）で馬狼との時間差を軽減
- 名前未入力時は「プレイヤー1」等のデフォルト名を自動設定

---

## 🗺️ ロードマップ

### Phase 1: Web版 MVP ✅ 完了
- [x] 基本ゲームフロー実装
- [x] スマホ回し式UI
- [x] 馬券配布（1人1頭、被りなし）
- [x] 投票・決選投票
- [x] 夜フェイズ（全員スマホ回し）
- [x] GitHub Pagesデプロイ
- [x] スマホ対応（スクロール、タッチ操作）

### Phase 2: UI/UX改善（次のステップ）
- [ ] トップ画面にヒーロー画像追加（競馬場の臨場感ある画像）
- [ ] 効果音・BGM追加
- [ ] アニメーション強化
- [ ] PWA化（ホーム画面追加対応、オフライン動作）
- [ ] ダークモード/ライトモード切り替え

### Phase 3: 機能拡張
- [ ] 実際の競馬レースAPI連携（無料API調査）
- [ ] 馬券金額のシミュレーション表示
- [ ] ゲーム履歴・統計
- [ ] 追加役職（将来的に）
- [ ] 多言語対応

### Phase 4: App Store リリース
- [ ] Capacitor等でiOSアプリ化
- [ ] Apple Developer Program登録（年間12,800円）
- [ ] アプリ名正式決定
- [ ] App Store審査・申請
- [ ] Android版（Google Play）

---

## 📝 著作権・法的メモ

### 方針
- 人狼のゲームルール自体に著作権はない（パブリックドメイン）
- 「馬狼」は さらば青春の光のYouTube企画名
- アプリ名は**オリジナル名**を使用（「ウマジン」等）
- 説明文・キーワードに「馬狼」を含めてSEO対策

### App Store 申請時の表記案
- **アプリ名**: ウマジン - 馬券×人狼パーティーゲーム
- **サブタイトル**: 馬狼を楽しむための非公式サポートアプリ
- **説明文**: 「YouTubeで話題の馬狼（うまろう）を友達と手軽に遊べるサポートアプリです」
- **カテゴリ**: ゲーム > パーティー

### やってはいけないこと
- さらば青春の光の名前・ロゴ・動画素材の無断使用
- 公式アプリと誤認させる表記
- 動画のスクショや音声のアプリへの組み込み

---

## 🔧 開発ログ

### 2026-02-27
- プロジェクト開始
- 人狼ゲーム徹底リサーチ（jinrou-research.md）
- Web版 MVP開発（Claude Codeサブエージェント）
- GitHub Pagesデプロイ
- UIリデザイン（zinro.net参考、競馬要素追加）
- 機能修正: レース画面シンプル化、パスコード廃止→スマホ回し方式
- バグ修正: スクロール問題、画面コンパクト化
- 機能追加: 決選投票、1人1頭、デフォルトプレイヤー名
- バグ修正: 枠色の視認性、夜フェイズの馬狼画面表示
- 夜フェイズ改善: 全員スマホ回し（バレ防止）

---

## 📂 ファイル構成

```
openclaw-workspace/
├── PROJECT.md          ← このファイル
├── jinrou-research.md  ← 人狼リサーチ資料
└── umarou-app/
    ├── index.html      ← アプリ本体（1ファイル完結）
    └── PROJECT.md      ← このファイル（アプリ内にも配置）
```

## 🔗 リンク

- **アプリURL**: https://subaru-blip.github.io/umarou/
- **GitHubリポ（アプリ）**: https://github.com/subaru-blip/umarou
- **GitHubリポ（ワークスペース）**: https://github.com/subaru-blip/openclaw-workspace
- **元ネタ動画**: https://www.youtube.com/watch?v=Z5SNKemPNaE
- **人狼Online（UI参考）**: https://zinro.net/m/
